import{_ as Te,a as je}from"./CuTdjjvY.js";import{u as Be,r as $e,R as qe,S as Pe,T as Ie,_ as Ee,a as Ue,b as Fe,D as Ge}from"./tyoosHN1.js";import{_ as Ae}from"./CKP9D31c.js";import{_ as Me}from"./D7mtGAGI.js";import{_ as ze}from"./C0MpYsF0.js";import{_ as Le}from"./PYXEAhwZ.js";import{_ as He}from"./BCUAfS-d.js";import{f as We,z as Ye,U as Ke,r,B as Qe,i as Xe,n as Ze,o as y,c as b,b as o,d as l,w as x,e as p,t as D,u as t,q as N,x as $,C as q,T as P,s as v,S as ie,y as ea,V as aa,F as ta,j as de}from"./Ho11KFCP.js";import{_ as sa}from"./FIoW0_7y.js";import{c as T,i as oa,a as la,b as ra}from"./ycDIoMx1.js";import{_ as na}from"./C1WC2wNv.js";import{_ as ca}from"./BA2uKlca.js";import{_ as ia,j as da}from"./D97VTyYW.js";import{T as ue,o as ua,E as ma}from"./BQImT8Uo.js";import{u as ha}from"./bkTsuWyN.js";import{e as fa,a as g}from"./COAcYwch.js";import{r as ya}from"./DLsSqBkb.js";const va={class:"flex justify-between"},_a={class:"flex flex-col"},ga={class:"flex items-center justify-between my-4"},Sa={key:0,class:"flex items-center"},ba={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},xa={class:"icon"},wa={class:"flex items-center justify-end"},Da={class:"dark:border-gray-700 dark:shadow-xl dark:border rounded-lg overflow-hidden"},ka={class:"relative flex items-center mb-2"},Oa={class:"absolute right-0"},pa={class:"dark:border-gray-700 dark:shadow-xl dark:border rounded-lg overflow-hidden"},Na={class:"p-6"},Ca={key:0,class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},Ra={class:"mt-6"},Ja={key:0,class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},Va={key:1,class:"flex items-center justify-center"},Ya=We({__name:"index",props:{searchData:Object},setup(me){var L,H,W,Y,K,Q;ha({title:"Generate JSON Schema | SFDC Developer Toolkit",ogTitle:"Generate JSON Schema | SFDC Developer Toolkit",description:"Online JSON Schema Generator.",ogDescription:"Online JSON Schema Generator."});const e=me,I=[da(),ua,ma.lineWrapping],he=Ye(),E=s=>{he.value=s.view},U=Ke(),F=Be(),k=r(!1),G=r(!1);r(!0);const fe=r(""),_=r(""),S=r("");r(""),r(!0),r(!1),r("Enter Rest Resource Name");const ye=r(null),ve=async()=>{var s,a,n;(s=e==null?void 0:e.searchData)!=null&&s.json&&((a=e==null?void 0:e.searchData)==null?void 0:a.json)!="No JSON Code Found"&&(_.value=JSON.stringify(JSON.parse((n=e==null?void 0:e.searchData)==null?void 0:n.json)))},_e=async s=>{ye.value=s},ge=()=>{_.value="",fe.value="",de("/tools/json/formatter/")},c=r(!0),A=r("auto"),j=()=>{c.value=!c.value,A.value=c.value?"auto":"600px"},h=r({name:(L=e==null?void 0:e.searchData)!=null&&L.name?(H=e==null?void 0:e.searchData)==null?void 0:H.name:"",shared:(W=e==null?void 0:e.searchData)!=null&&W.shared?(Y=e==null?void 0:e.searchData)==null?void 0:Y.shared:!1,user:null});r({name:(K=e==null?void 0:e.searchData)==null?void 0:K.name,resourceName:(Q=e==null?void 0:e.searchData)==null?void 0:Q.resourceName,method:"POST",type:"RestResource",namespace:"omnistudio",osType:"IP"});const M=r(null),u=r(null),C=r("Save to Cloud"),i=r("Save"),R=r(null),d=r(!1),Se=s=>{s()},w=()=>{k.value=!1,G.value=!1,d.value=!1,G.value=!1},be=()=>{fa(F,!0)},xe=async()=>{var s;u.value||(u.value=await T()),M.value={table:"tool_json_schema",fields:"id,name",like:{searchColumn:"name"},orStatement:`user.eq.${(s=u.value)==null?void 0:s.id},shared.eq.true`}},we=async()=>{var s,a;(s=e==null?void 0:e.searchData)!=null&&s.id&&((a=e==null?void 0:e.searchData)==null?void 0:a.createdBy)==u.value.name?await pe():await z()},z=async()=>{R.value=De,C.value="Save to Cloud",i.value="Save",k.value=!0},De=async()=>{d.value=!0,u.value||(u.value=await T());const s={table:"tool_json_schema",insertValues:[{name:h.value.name,user:u.value.id,inputJSON:_.value,shared:h.value.shared,schema:S.value}],selectValues:"id, name"},a=await oa(s);if(console.log("resp --> "+JSON.stringify(a)),(a==null?void 0:a.code)=="23505"&&(a!=null&&a.message)){g("Duplicate record exists, please choose different name.","Error"),d.value=!1;return}else a!=null&&a.id?(g("Record has been saved","Success"),U.push(`/tools/json/schema/${a==null?void 0:a.id}`)):(console.log("error --> "+JSON.stringify(a)),g("Record was not inserted, check dev console for errors","Error"));d.value=!1,w()},ke=async()=>{var s;R.value=Oe,C.value="Delete Record : "+((s=e==null?void 0:e.searchData)==null?void 0:s.name),i.value="Delete",k.value=!0},Oe=async()=>{var n,m;if(!((n=e==null?void 0:e.searchData)!=null&&n.id))return;d.value=!0;const s={table:"tool_json_schema",filter:{compareTo:"id",CompareValue:(m=e==null?void 0:e.searchData)==null?void 0:m.id}},a=await la(s);console.log("deleteRecord --> "+JSON.stringify(a)),d.value=!1,w(),g("Record has been deleted."),await de("/tools/json/schema/")},pe=async()=>{var s;R.value=Ne,C.value="Update your record : "+((s=e==null?void 0:e.searchData)==null?void 0:s.name),i.value="Update",k.value=!0},Ne=async()=>{var n;d.value=!0,u.value||(u.value=await T());const s={table:"tool_json_schema",insertValues:[{name:h.value.name,inputJSON:_.value,shared:h.value.shared,schema:S.value}],filter:{compareTo:"id",compareValue:(n=e==null?void 0:e.searchData)==null?void 0:n.id},selectValues:"id, name"},a=await ra(s);if((a==null?void 0:a.code)=="23505"&&(a!=null&&a.message)){g("Duplicate record exists, please choose different name.","Error"),d.value=!1;return}else a!=null&&a.id?(g("Record has been updated.","Success"),U.push(`/tools/json/schema/${a==null?void 0:a.id}`)):(console.log("error --> "+JSON.stringify(a)),g("Record was not inserted, check dev console for errors","Error"));d.value=!1,w()},Ce=()=>{try{const s=JSON.parse(_.value),a=J(s);a.$schema="http://json-schema.org/draft-07/schema#",S.value=JSON.stringify(a,null,4),g("JSON Schema Generated")}catch(s){S.value="Error: Invalid JSON input. Please check the input and try again.",console.error("Error Data --> ",s),g("Error Occurred, please check Console")}},J=s=>{if(Array.isArray(s))return{type:"array",items:J(s[0])};if(typeof s=="object"&&s!==null){const a={type:"object",properties:{},required:[]};for(const n in s)if(s.hasOwnProperty(n)){const m=s[n],B=typeof m;Array.isArray(m)?a.properties[n]={type:"array",items:J(m[0])}:typeof m=="object"&&m!==null?a.properties[n]=J(m):a.properties[n]={type:B},a.required.push(n)}return a}else return{type:typeof s}};return Qe(()=>h.value.name,()=>{z()}),Xe(async()=>{j(),await Ze(),u.value=await T(),await xe(),await ve()}),(s,a)=>{var Z,ee,ae,te,se,oe,le,re,ne,ce;const n=Te,m=je,B=Ee,X=Ae,O=Ue,V=Me,Re=ze,Je=Le,Ve=He;return y(),b(ta,null,[o("div",va,[o("div",_a,[l(n,{class:"mb-2",subText:(Z=e==null?void 0:e.searchData)==null?void 0:Z.name},{default:x(()=>a[5]||(a[5]=[p("JSON Schema Generator")])),_:1},8,["subText"]),l(m,null,{default:x(()=>{var f;return[p("Generates JSON schema for your Input JSON which can be used for JSON Validation. "+D((f=e==null?void 0:e.searchData)!=null&&f.name?`Also you can use
                below url to share with your team.`:""),1)]}),_:1})]),o("div",null,[l(sa,{onDefaultOrgSelected:_e})])]),o("div",ga,[o("div",null,[(ee=e==null?void 0:e.searchData)!=null&&ee.name&&((ae=e==null?void 0:e.searchData)==null?void 0:ae.name)!="NA"?(y(),b("div",Sa,[o("div",{class:"border rounded-lg px-3 py-1.5 flex items-center justify-between cursor-pointer flex-shrink-0 bg-slate-50 hover:bg-slate-100 dark:bg-gray-700/90 dark:border-gray-600 dark:text-gray-400 dark:hover:bg-gray-700/50 hover:border-slate-300 hover:shadow-md transition duration-300 ease-in-out",onClick:be},[o("p",ba,D(t(F)),1),o("span",xa,[l(t($e),{class:"h-4 w-4 text-gray-500 dark:text-gray-400 ml-4"})])])])):N("",!0)]),o("div",wa,[l(B,{class:"mr-2",searchTable:"tool_json_schema",isIcon:!1,routePath:"tools/json/schema",searchParams:t(M)},null,8,["searchParams"]),l(X,{onClick:Ce,class:"mr-2"},{default:x(()=>a[6]||(a[6]=[p("Generate Schema")])),_:1}),t(_)?(y(),$(O,{key:0,icon:Fe,isSquare:!1,onClick:we,color:"green",class:"mr-2",title:"Save Record"})):N("",!0),(te=e==null?void 0:e.searchData)!=null&&te.id&&((se=e==null?void 0:e.searchData)==null?void 0:se.createdBy)==((oe=t(u))==null?void 0:oe.name)?(y(),$(O,{key:1,icon:Ge,isSquare:!1,onClick:ke,color:"red",class:"mr-2",title:"Delete Record"})):N("",!0),l(O,{icon:qe,isSquare:!1,color:"gray",class:"mr-2",title:"Reset Data",onClick:ge}),q(l(O,{icon:Pe,isSquare:!1,color:"blue",onClick:j,class:"!p-1.5 mr-4",title:"Toggle to Side by Side View"},null,512),[[P,t(c)]]),q(l(O,{icon:Ie,isSquare:!1,onClick:j,color:"blue",class:"!p-1.5 mr-4",title:"Toggle to Top vs Bottom View"},null,512),[[P,!t(c)]])])]),o("div",{class:v({"flex flex-col lg:flex-row space-y-4 lg:space-y-0 lg:space-x-4 mt-8":!t(c)})},[o("div",{class:v(["w-full mr-3",{"lg:w-1/2":!t(c),"mt-2":t(c)}])},[o("div",{class:v(["",{"flex items-center justify-between":!t(c)}])},[l(V,{value:"Input JSON",class:v({"mb-2":!t(c),"mb-3":t(c)&&!((le=e==null?void 0:e.searchData)!=null&&le.createdBy)})},null,8,["class"]),(re=e==null?void 0:e.searchData)!=null&&re.createdBy?(y(),b("p",{key:0,class:v(["block font-medium text-sm text-gray-600 dark:text-gray-300 mb-2",{"ml-3 mr-2":!t(c),"mt-2":t(c)}])},"Created By : "+D((ne=e==null?void 0:e.searchData)==null?void 0:ne.createdBy)+" at "+D((ce=e==null?void 0:e.searchData)==null?void 0:ce.createdDate),3)):N("",!0)],2),o("div",Da,[l(t(ue),{modelValue:t(_),"onUpdate:modelValue":a[0]||(a[0]=f=>ie(_)?_.value=f:null),placeholder:"Paste your JSON here",style:ea({height:t(A),borderRadius:"5px",overflow:"hidden",maxHeight:"600px",minHeight:"100px"}),autofocus:!0,"indent-with-tab":!0,"tab-size":2,extensions:I,onReady:E},null,8,["modelValue","style"])])],2),o("div",{class:v(["w-full mr-3",{"lg:w-1/2":!t(c),"mt-4":t(c)}])},[o("div",ka,[o("div",null,[l(V,{value:"Output JSON"})]),o("div",Oa,[l(ia,{copyValue:t(S),class:"mr-2 ml-4 mb-2"},null,8,["copyValue"])])]),o("div",pa,[l(t(ue),{modelValue:t(S),"onUpdate:modelValue":a[1]||(a[1]=f=>ie(S)?S.value=f:null),placeholder:"Execute any action",style:{height:"600px",borderRadius:"5px",overflow:"hidden"},autofocus:!0,"indent-with-tab":!0,"tab-size":2,extensions:I,onReady:E},null,8,["modelValue"])])],2)],2),l(Ve,{show:t(k),onClose:w,cssStyle:t(i)==="Delete"?"mt-72":""},{default:x(()=>[o("button",{type:"button",onClick:w,class:"absolute top-3 end-3 text-gray-400 bg-gray-100 hover:bg-gray-200 hover:text-gray-600 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:bg-gray-600 dark:text-white dark:hover:bg-gray-500 transition duration-200 ease-in-out"},[l(t(ya),{class:"w-6 h-6"}),a[7]||(a[7]=o("span",{class:"sr-only"},"Close modal",-1))]),o("div",Na,[o("h2",{class:v(["text-lg font-medium text-gray-900 dark:text-gray-100",[t(i)=="Delete"?"text-center":""]])},D(t(C)),3),t(i)!="Delete"?(y(),b("p",Ca," You can save this data to cloud and retrive or share with your team. ")):(y(),b("p",{key:1,class:v(["mt-1 text-sm text-gray-600 dark:text-gray-400",[t(i)=="Delete"?"text-center":""]])}," This record will be permanently deleted. ",2)),o("form",{onSubmit:a[4]||(a[4]=aa(f=>Se(t(R)),["prevent"]))},[q(o("div",Ra,[l(V,{for:"name",value:"File Name",class:"mt-4"}),l(Re,{modelValue:t(h).name,"onUpdate:modelValue":a[2]||(a[2]=f=>t(h).name=f),ref:"nameInput",type:"text",id:"name",class:"mt-1 block w-full py-2",required:t(i)!="Delete",placeholder:"Enter file name"},null,8,["modelValue","required"]),l(V,{for:"shared",value:"is Public?",class:"mt-4"}),t(i)!="Delete"?(y(),b("p",Ja," Allow others to access, recommended if you want to share data with your team. ")):N("",!0),l(na,{isChecked:t(h).shared,onChange:a[3]||(a[3]=f=>t(h).shared=!t(h).shared),class:"mt-2"},null,8,["isChecked"])],512),[[P,t(i)!="Delete"]]),o("div",{class:v(t(i)=="Delete"?"mt-6 text-center":"mt-6 flex justify-end")},[l(Je,{onClick:w},{default:x(()=>a[8]||(a[8]=[p(" Cancel ")])),_:1}),l(X,{class:v(["ml-3",[t(i)=="Delete"?"bg-red-600 hover:bg-red-500 active:bg-red-700 focus:ring-red-500":"",t(d)?"cursor-not-allowed opacity-80":"cursor-pointer"]]),disabled:t(d)},{default:x(()=>[t(d)?(y(),$(ca,{key:0,cssStyle:"h-4 w-4 mr-2"},{default:x(()=>a[9]||(a[9]=[p("Saving.. ")])),_:1})):(y(),b("div",Va,D(t(i)),1))]),_:1},8,["class","disabled"])],2)],32)])]),_:1},8,["show","cssStyle"])],64)}}});export{Ya as _};
