import{_ as Q,a as q}from"./CuTdjjvY.js";import{_ as z}from"./D7mtGAGI.js";import{_ as Y}from"./CKP9D31c.js";import{_ as K}from"./C0MpYsF0.js";import{a as J,z as Z,h as ee,r as m,A as te,m as ae,B as oe,i as re,c as C,b as o,d as r,w as d,F as V,g as se,u as L,o as B,e as p,C as le,D as ie,t as ne}from"./Ho11KFCP.js";import{_ as de}from"./FIoW0_7y.js";import{D as ce}from"./NYwah7P7.js";import{o as ue,E as me,T as pe}from"./BQImT8Uo.js";import{j as fe}from"./C4sX3Osg.js";import{h as _e}from"./BWsKriaw.js";import{a as ye}from"./COAcYwch.js";import"./9nx4tXco.js";import"./ycDIoMx1.js";import"./Z-iyx2tQ.js";import"./DW2Y3oEk.js";import"./BhtQlZEJ.js";const be={class:"flex justify-between"},ve={class:"flex flex-col"},ge={class:"container mx-auto py-4"},he={class:"flex items-center space-x-4"},xe={class:"w-52"},Ee={class:"flex items-center space-x-4"},we={class:"flex items-center space-x-2"},Re=["onUpdate:modelValue"],Ne={class:"dark:border-gray-700 dark:shadow-xl dark:border rounded-lg overflow-hidden"},De={class:"flex items-center"},Se={class:"flex items-center space-x"},Te={class:"ml-auto"},Ie="StartTime",ke="desc",Ae={__name:"parser",props:{debugId:""},setup(Ce){const U=[fe(),ue,me.lineWrapping],O=Z(),F=t=>{O.value=t.view},R=ee().query.id;m(!1),m(null),m([]);const G=["time","action","variable","data"],b=m(""),P=[{text:"Time",value:"time"},{text:"Action",value:"action"},{text:"Line Number",value:"variable"},{text:"Value",value:"data"}],c=m(""),E=m([]),w=[{type:"FATAL_ERROR",default:!0},{type:"EXCEPTION_THROWN",default:!0},{type:"SOQL_EXECUTE_BEGIN",default:!0},{type:"VARIABLE_ASSIGNMENT",default:!1},{type:"USER_DEBUG",default:!0}],f=te(w.reduce((t,{type:e,default:l})=>(t[e]=l,t),{})),$=ae(()=>E.value.filter(t=>f[t.action]));oe(c,t=>{t&&N()});const N=()=>{if(!Object.values(f).some(t=>t)){console.warn("Please select at least one action type.");return}E.value=M(c.value)},M=t=>{var v;if(Array.isArray(t)&&((v=t[0])==null?void 0:v.errorCode)=="INVALID_CROSS_REFERENCE_KEY"){ye("Error : Invalid cross reference id, please contact admin.","Error");return}const e=[];return t.split(`
`).forEach(s=>{const _=s.match(/^(\d+:\d+:\d+\.\d+)/),g=_?_[1]:"";w.forEach(({type:a})=>{var h,D,S,T,I,k,A;if(s&&s.includes(`|${a}|`)&&f[a]){const i=(h=s.split(`|${a}|`)[1])==null?void 0:h.trim(),n={time:g,action:a};if(i)if(a==="EXCEPTION_THROWN"||a==="VARIABLE_ASSIGNMENT"){const u=i.match(/\[\d+\]/);if(u){const y=u[0],x=a==="EXCEPTION_THROWN"?(D=i.split("|")[1])==null?void 0:D.trim():((S=i.split("|")[1])==null?void 0:S.trim())+" : "+((T=i.split("|")[2])==null?void 0:T.trim());n.variable=y,n.data=x,e.push(n)}}else if(a==="SOQL_EXECUTE_BEGIN"){const u=(I=i.match(/\[\d+\]/))==null?void 0:I[0],y=(k=i.split("SELECT")[1])==null?void 0:k.trim();n.variable=u,n.data=y,e.push(n)}else if(a==="USER_DEBUG"){const u=s.split("|USER_DEBUG|")[1].trim(),y=((A=u.match(/\[\d+\]/))==null?void 0:A[0])||"",x=u.split("|").pop().trim();x&&e.push({time:g,action:"USER_DEBUG",variable:y,data:x})}else n.data=i,e.push(n)}})}),e};m("");const X=t=>{const e=t.target.files[0];if(e){const l=new FileReader;l.onload=()=>{c.value=l.result},l.readAsText(e)}},W=()=>{},j=()=>{c.value="",E.value=[],b.value=""},H=async t=>{try{const e=await _e("Tooling_Query_ApexLogBody",t,null,"GET");c.value=e}catch(e){console.error("Error loading data : ",e)}};return re(()=>{R&&H(R)}),(t,e)=>{const l=Q,v=q,s=z,_=Y,g=K;return B(),C(V,null,[o("div",be,[o("div",ve,[r(l,{class:"mb-2"},{default:d(()=>e[2]||(e[2]=[p("Debug Logs Parser")])),_:1}),r(v,null,{default:d(()=>e[3]||(e[3]=[p("Read debug log data easily.")])),_:1})]),o("div",null,[r(de)])]),o("div",ge,[o("div",he,[o("div",xe,[r(s,{class:"font-semibold my-4"},{default:d(()=>e[4]||(e[4]=[p("Upload Log File")])),_:1}),o("input",{onChange:X,accept:".log",class:"relative m-0 block w-full min-w-0 flex-auto cursor-pointer rounded-md border border-solid border-gray-300 bg-clip-padding px-3 py-[0.32rem] text-xs font-normal text-gray-700 transition duration-300 ease-in-out file:-mx-3 file:-my-[0.32rem] file:cursor-pointer file:overflow-hidden file:rounded-none file:border-0 file:border-solid file:border-inherit file:bg-gray-100 file:px-3 file:py-[0.32rem] file:text-gray-700 file:transition file:duration-150 file:ease-in-out file:[border-inline-end-width:1px] file:[margin-inline-end:0.75rem] hover:file:bg-gray-200 focus:border-primary focus:text-gray-700 focus:shadow-te-primary focus:outline-none dark:border-gray-600 dark:text-gray-200 dark:file:bg-gray-700 dark:file:text-gray-100 dark:focus:border-primary",id:"file_input",type:"file"},null,32)]),o("div",Ee,[o("div",null,[r(s,{class:"font-semibold my-4"},{default:d(()=>e[5]||(e[5]=[p("Select Action Type")])),_:1}),o("div",we,[(B(),C(V,null,se(w,a=>r(s,{key:a.type,class:"cursor-pointer mr-2"},{default:d(()=>[le(o("input",{type:"checkbox","onUpdate:modelValue":h=>f[a.type]=h,class:"mr-1 mb-1"},null,8,Re),[[ie,f[a.type]]]),o("span",null,ne(a.type),1)]),_:2},1024)),64))])])])]),r(s,{class:"font-semibold mt-6"},{default:d(()=>e[6]||(e[6]=[p("Or paste your debug log here")])),_:1}),o("div",Ne,[r(L(pe),{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=a=>c.value=a),placeholder:"Your data will appear here",style:{height:"100px",borderRadius:"5px",overflow:"hidden",marginTop:"7px"},autofocus:!0,"indent-with-tab":!0,"tab-size":2,extensions:U,onReady:F,onChange:W},null,8,["modelValue"])]),o("div",De,[o("div",Se,[r(_,{onClick:N,class:"mr-4"},{default:d(()=>e[7]||(e[7]=[p("Submit")])),_:1}),r(g,{modelValue:b.value,"onUpdate:modelValue":e[1]||(e[1]=a=>b.value=a),type:"text",class:"my-4 mr-4 !px-2 !py-1",placeholder:"Search any string.."},null,8,["modelValue"])]),o("div",Te,[r(_,{onClick:j,class:"mr-4",isRed:!0},{default:d(()=>e[8]||(e[8]=[p("Reset")])),_:1})])]),r(L(ce),{headers:P,items:$.value,"search-field":G,"rows-per-page":50,"header-text-direction":"center","search-value":b.value,"sort-by":Ie,"sort-type":ke,"no-hover":!0,"theme-color":"#312e3d","table-class-name":"tableCSS mb-12 rounded-lg border dark:border-gray-700 shadow-md"},null,8,["items","search-value"])])],64)}}},Ye=J(Ae,[["__scopeId","data-v-8caab43a"]]);export{Ye as default};
