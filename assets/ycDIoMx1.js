import{a as n}from"./COAcYwch.js";import"./Ho11KFCP.js";import{u as d}from"./Z-iyx2tQ.js";const m=async t=>await O(t),O=async t=>{try{const a={method:"POST",body:t};return await $fetch("/api/manageSession",a)}catch(a){console.error("error --> ",a)}},b=async()=>{try{const t={method:"GET"};return await $fetch("/api/getSessionData",t)}catch(t){console.error("getSessionData error --> ",t)}},S=async t=>{try{const a={method:"POST",body:t};return await $fetch("/api/supabase/getTableData",a)}catch(a){return console.error("error --> ",a),n(a,"Error"),"UNKNOWN_ERROR_CATCHBLOCK"}},_=async t=>{try{const a={method:"POST",body:t};return await $fetch("/api/supabase/insertTableData",a)}catch(a){return console.log("error --> ",JSON.stringify(a)),n(a,"Error"),"UNKNOWN_ERROR_CATCHBLOCK"}},h=async t=>{try{const a={method:"POST",body:t},e=await $fetch("/api/supabase/updateTableData",a);return console.log("updateSupabaseData --> "+JSON.stringify(e)),e}catch(a){return console.error("error --> ",a),n(a,"Error"),"UNKNOWN_ERROR_CATCHBLOCK"}},N=async t=>{try{const a={method:"POST",body:t};return await $fetch("/api/supabase/deleteTableData",a)}catch(a){return console.error("error --> ",a),n(a,"Error"),"UNKNOWN_ERROR_CATCHBLOCK"}},T=async()=>{var r;const t=await $fetch("/api/userData"),a={table:"users",fields:"id,name,email",filter:{compareTo:"email",CompareValue:(r=t==null?void 0:t.user)==null?void 0:r.email}},e=await S(a);return e.length>0?(await m({userData:e[0]}),e[0]):null},c="sfdcOrgList",i=()=>{const t=localStorage.getItem(c);return t?JSON.parse(t):[]},l=t=>{localStorage.setItem(c,JSON.stringify(t)),g(t)},g=async t=>{var r,s;const a=await d("/api/userData","$niiIvAf3GG"),e={table:"users",insertValues:[{orgData:t}],filter:{compareTo:"email",compareValue:(s=(r=a.data.value)==null?void 0:r.user)==null?void 0:s.email},selectValues:"id, email, orgData"};h(e),console.log("updateOrgDataSupabase done")},C=(t,a,e,r,s)=>{const o=i(),u=o.findIndex(p=>p.instance_url===t);u!==-1?o[u]={instance_url:t,access_token:a,refresh_token:e,issued_at:r,org_type:s}:o.push({instance_url:t,access_token:a,refresh_token:e,issued_at:r,org_type:s}),l(o)},R=t=>{let a=i();return a=a.filter(e=>e.instance_url!==t),l(a),a},w=()=>i(),E=()=>{localStorage.removeItem(c)};export{N as a,h as b,T as c,R as d,w as f,b as g,S as h,_ as i,E as r,C as s,m as u};
